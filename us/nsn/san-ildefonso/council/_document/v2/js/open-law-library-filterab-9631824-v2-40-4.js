(self.webpackChunk=self.webpackChunk||[]).push([[559],{9272:(t,e,n)=>{var r=n(8393),i=n(987),l=n(2271);r({target:"Object",stat:!0,forced:n(254)((function(){l(1)}))},{keys:function(t){return l(i(t))}})},3338:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"table--filtered"},[t.tableCaption?n("h6",{staticClass:"h__caption"},[t._v("\n\t\t"+t._s(t.tableCaption.content)+"\n\t")]):t._e(),t._v(" "),n("div",{staticClass:"filter-form"},[n("span",{staticClass:"icon icon-funnel"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"filter__input",attrs:{type:"text",placeholder:"Filter table...","aria-label":"Enter search term to filter table results"},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}})]),t._v(" "),t.tableThead?n("div",{staticClass:"table_wrap"},[n("table",{staticStyle:{width:"100%"}},[t.tableThead?n("thead",t._l(t.tableThead.children,(function(e,r){return n("tr",{key:"trh_"+r},t._l(e.children,(function(e,i){return n("th",{key:"th_"+r+"_"+i},[t._v("\n\t\t\t\t\t\t"+t._s(e.content)+"\n\t\t\t\t\t")])})),0)})),0):t._e(),t._v(" "),t.tableTbody?n("tbody",[t.isFilterEmpty?n("tr",[n("td",{attrs:{colspan:t.colspan}},[t._v("No results")])]):t._l(t.filteredRows,(function(e,r){return n("tr",{key:"trb_"+r},t._l(e.children,(function(e,i){return n("td",{key:"td_"+r+"_"+i},["children"in e&&0!==e.children.length?n("span",t._l(e.children,(function(e,l){return n(e.nodeName,{key:"a_"+r+"_"+i+"_"+l,tag:"component",class:t.attr("class",e.attributes),attrs:{href:t.attr("href",e.attributes),title:t.attr("title",e.attributes)},domProps:{innerHTML:t._s(t.highlightMatches(e.content))}})})),1):n("span",{key:"span_"+r+"_"+i,domProps:{innerHTML:t._s(t.highlightMatches(e.content))}})])})),0)}))],2):t._e()])]):n("div",{domProps:{innerHTML:t._s(t.processedHtml.outerHTML)}})])};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}r._withStripped=!0;var l=n(6311),o=n(2932);var a=n(4797);function s(t){return function(t){if(Array.isArray(t))return(0,o.Z)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,a.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n(3491),n(5453),n(297),n(4579),n(5742),n(8406),n(6047),n(4418),n(2684),n(3094),n(1626),n(5573),n(1611),n(1464),n(8670),n(2357),n(393),n(642),n(3365),n(9272);var c=n(8849),u=n.n(c);const h={name:"TableFilter",props:{rawHtml:{type:String}},data:function(){return{processedHtml:null,tableJson:null,filter:""}},computed:{tableCaption:function(){return this.findEl("caption",this.tableJson)},tableThead:function(){return this.findEl("thead",this.tableJson)},tableTbody:function(){return this.findEl("tbody",this.tableJson)},filteredRows:function(){var t=this;return""!==this.filter.trim()?this.tableTbody.children.filter((function(e){var n=!1;return e.children.forEach((function(e){e.content.toString().toLowerCase().includes(t.filter.toLocaleLowerCase())&&(n=!0)})),!!n&&e})):this.tableTbody.children},colspan:function(){return this.tableThead.children.length+1},isFilterEmpty:function(){return 0===this.filteredRows.length}},watch:{filter:function(t,e){this.debouncedAnnouncement()}},created:function(){this.processHtml(),this.debouncedAnnouncement=u()(this.announcement,1e3)},methods:{tableToJson:function(t){var e=this;this.tableJson=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===n)return!1;var r=String(n.nodeName).toLowerCase(),i={nodeName:r};if(i.content=n.textContent.trim(),"attributes"in n&&e.nodeMap2Obj(n.attributes)&&(i.attributes=e.nodeMap2Obj(n.attributes)),null!=n&&n.colspan&&(i.colspan=n.colspan),null!=n&&n.rowspan&&(i.rowspan=n.rowspan),(null==n?void 0:n.children.length)>0){null!=i&&i.children||(i.children=[]);for(var l=0;l<n.children.length;l++){var o=n.children[l];i.children[l]=t(o)}}return i}(t)},findEl:function(t,e){var n=!1;return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(String(r.nodeName)===String(t)&&(n=r),null!=r&&r.children)for(var i=0;i<r.children.length;i++){var l=e(r.children[i]);if(l)break}return n}(e),n},highlightMatches:function(t){if(""!==this.filter.trim()){var e=t.toLowerCase().includes(this.filter.toLowerCase()),n=new RegExp(this.filter,"ig");return e?t.replace(n,(function(t){return'<b class="filter--highlight">'.concat(t,"</b>")})):t}return t},unescapeHtml:function(t){return t.replace(/Â´/gim,"'")},processHtml:function(){var t=(new DOMParser).parseFromString(this.unescapeHtml(this.$props.rawHtml),"text/html");this.processedHtml=t.activeElement.children[0],this.tableToJson(t.activeElement.firstChild)},nodeMap2Obj:function(t){var e=Object.assign.apply(Object,[{}].concat(s(Array.from(t,(function(t){var e=t.name,n=t.value;return(0,l.Z)({},e,n)})))));return 0===Object.keys(e).length?null:e},announcement:function(){var t="Filtered table results, found ".concat(this.filteredRows.length,' results for query "').concat(this.filter,'"');""!==this.filter.trim()&&(console.log(t),this.$announcer.set(t))},attr:function(t,e){return"object"===i(e)&&(t in e&&e[t])}}};var f=(0,n(8).Z)(h,r,[],!1,null,null,null);f.options.__file="core__front-end/v2/shared/js/components/table-filter/TableFilter.vue";const d=f.exports}}]);